(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{430:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=p(n(427)),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(424);var o=n(1),s=p(o),i=n(56),u=n(43),c=p(n(813)),f=p(n(879)),d=n(164);function p(e){return e&&e.__esModule?e:{default:e}}n(918);var m=(0,i.connect)(null,function(e){return(0,u.bindActionCreators)({getTeams:d.getTeams,addTeams:d.addTeams},e)})(a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.addTeams=function(){n.setState({visible:!0})},n.handleModalCancel=function(){n.setState({visible:!1})},n.handleAddSubmit=function(e){var t=n.props,a=t.getTeams;(0,t.addTeams)(e).then(function(){n.handleModalCancel(),a()})},n.state={visible:!1},n.page=1,n.pageSize=99,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),l(t,[{key:"componentDidMount",value:function(){this.getTeams()}},{key:"getTeams",value:function(){var e=this.props.getTeams;e(this.page,this.pageSize)}},{key:"render",value:function(){var e=this.state.visible;return s.default.createElement("div",null,s.default.createElement("div",{className:"teams-page__header"},s.default.createElement("div",{className:"teams-page__add"},s.default.createElement("a",{className:"ui-btn",onClick:this.addTeams},"添加"))),s.default.createElement(f.default,null),s.default.createElement(r.default,{title:"添加球队",visible:e,onCancel:this.handleModalCancel,width:680,footer:null},e&&s.default.createElement(c.default,{submit:this.handleAddSubmit})))}}]),t}())||a;t.default=m},489:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditableContext=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(1));t.EditableContext=a.default.createContext()},813:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=h(n(21)),l=h(n(933)),o=h(n(932)),s=h(n(181)),i=h(n(14)),u=h(n(490)),c=h(n(166)),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(68),n(939),n(938),n(163),n(93),n(667),n(168);var p=n(1),m=h(p),j=n(56),b=n(43),y=n(179);function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var g=c.default.Item,_=u.default.Option;var E=(0,j.connect)(function(e){return{leagues:e.leagues}},function(e){return(0,b.bindActionCreators)({getLeagues:y.getLeagues},e)})(a=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,l=Array(r),o=0;o<r;o++)l[o]=arguments[o];return n=a=v(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.state={loading:!1},a.componentDidMount=function(){(0,a.props.getLeagues)()},a.handleSubmit=function(e){var t=a.props,n=t.form,r=t.submit;e.preventDefault(),n.validateFields(function(e,t){if(!e){var n=f({},t,{create_time:t.create_time.format("YYYY")});r(n)}})},a.handleChange=function(e){"uploading"!==e.file.status?"done"===e.file.status&&function(e,t){var n=new FileReader;n.addEventListener("load",function(){return t(n.result)}),n.readAsDataURL(e)}(e.file.originFileObj,function(e){return a.setState({imageUrl:e,loading:!1})}):a.setState({loading:!0})},v(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,p.Component),d(t,[{key:"render",value:function(){var e=this.props,t=e.form.getFieldDecorator,n=e.leagues,a=this.state,d=a.imageUrl,p=a.loading,j=m.default.createElement("div",null,m.default.createElement(i.default,{type:p?"loading":"plus"}),m.default.createElement("div",{className:"ant-upload-text"},"Upload")),b={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:12}}},y={rules:[{type:"string",required:!0,message:"请填写球队名称"}]},h={rules:[{type:"object",required:!0,message:"请选择成立年份"}]},v={rules:[{type:"string",required:!0,message:"请选择联赛"}]};return m.default.createElement(c.default,{onSubmit:this.handleSubmit},m.default.createElement(g,f({},b,{label:"名称"}),t("name",y)(m.default.createElement(s.default,{placeholder:"请填写名称"}))),m.default.createElement(g,f({},b,{label:"全称"}),t("full_name")(m.default.createElement(s.default,{placeholder:"请填写全称"}))),m.default.createElement(g,f({},b,{label:"外文名"}),t("en_name")(m.default.createElement(s.default,{placeholder:"请填写外文名"}))),m.default.createElement(g,f({},b,{label:"成立年份"}),t("create_time",h)(m.default.createElement(o.default,{placeholder:"请选择日期",mode:"date"}))),m.default.createElement(g,f({},b,{label:"联赛"}),t("league",v)(m.default.createElement(u.default,{placeholder:"请选择联赛"},n.list.items.map(function(e){return m.default.createElement(_,{value:e.name,key:e.id},e.name)})))),m.default.createElement(g,f({},b,{label:"队标"}),t("team_logo")(m.default.createElement(l.default,{name:"avatar",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:"//jsonplaceholder.typicode.com/posts/",onChange:this.handleChange},d?m.default.createElement("img",{src:d,alt:"avatar"}):j))),m.default.createElement(g,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},m.default.createElement(r.default,{type:"primary",htmlType:"submit"},"保存")))}}]),t}())||a;t.default=c.default.create()(E)},864:function(e,t,n){var a={"./af":544,"./af.js":544,"./ar":545,"./ar-dz":546,"./ar-dz.js":546,"./ar-kw":547,"./ar-kw.js":547,"./ar-ly":548,"./ar-ly.js":548,"./ar-ma":549,"./ar-ma.js":549,"./ar-sa":550,"./ar-sa.js":550,"./ar-tn":551,"./ar-tn.js":551,"./ar.js":545,"./az":552,"./az.js":552,"./be":553,"./be.js":553,"./bg":554,"./bg.js":554,"./bm":555,"./bm.js":555,"./bn":556,"./bn.js":556,"./bo":557,"./bo.js":557,"./br":558,"./br.js":558,"./bs":559,"./bs.js":559,"./ca":560,"./ca.js":560,"./cs":561,"./cs.js":561,"./cv":562,"./cv.js":562,"./cy":563,"./cy.js":563,"./da":564,"./da.js":564,"./de":565,"./de-at":566,"./de-at.js":566,"./de-ch":567,"./de-ch.js":567,"./de.js":565,"./dv":568,"./dv.js":568,"./el":569,"./el.js":569,"./en-au":570,"./en-au.js":570,"./en-ca":571,"./en-ca.js":571,"./en-gb":572,"./en-gb.js":572,"./en-ie":573,"./en-ie.js":573,"./en-il":574,"./en-il.js":574,"./en-nz":575,"./en-nz.js":575,"./eo":576,"./eo.js":576,"./es":577,"./es-do":578,"./es-do.js":578,"./es-us":579,"./es-us.js":579,"./es.js":577,"./et":580,"./et.js":580,"./eu":581,"./eu.js":581,"./fa":582,"./fa.js":582,"./fi":583,"./fi.js":583,"./fo":584,"./fo.js":584,"./fr":585,"./fr-ca":586,"./fr-ca.js":586,"./fr-ch":587,"./fr-ch.js":587,"./fr.js":585,"./fy":588,"./fy.js":588,"./gd":589,"./gd.js":589,"./gl":590,"./gl.js":590,"./gom-latn":591,"./gom-latn.js":591,"./gu":592,"./gu.js":592,"./he":593,"./he.js":593,"./hi":594,"./hi.js":594,"./hr":595,"./hr.js":595,"./hu":596,"./hu.js":596,"./hy-am":597,"./hy-am.js":597,"./id":598,"./id.js":598,"./is":599,"./is.js":599,"./it":600,"./it.js":600,"./ja":601,"./ja.js":601,"./jv":602,"./jv.js":602,"./ka":603,"./ka.js":603,"./kk":604,"./kk.js":604,"./km":605,"./km.js":605,"./kn":606,"./kn.js":606,"./ko":607,"./ko.js":607,"./ky":608,"./ky.js":608,"./lb":609,"./lb.js":609,"./lo":610,"./lo.js":610,"./lt":611,"./lt.js":611,"./lv":612,"./lv.js":612,"./me":613,"./me.js":613,"./mi":614,"./mi.js":614,"./mk":615,"./mk.js":615,"./ml":616,"./ml.js":616,"./mn":617,"./mn.js":617,"./mr":618,"./mr.js":618,"./ms":619,"./ms-my":620,"./ms-my.js":620,"./ms.js":619,"./mt":621,"./mt.js":621,"./my":622,"./my.js":622,"./nb":623,"./nb.js":623,"./ne":624,"./ne.js":624,"./nl":625,"./nl-be":626,"./nl-be.js":626,"./nl.js":625,"./nn":627,"./nn.js":627,"./pa-in":628,"./pa-in.js":628,"./pl":629,"./pl.js":629,"./pt":630,"./pt-br":631,"./pt-br.js":631,"./pt.js":630,"./ro":632,"./ro.js":632,"./ru":633,"./ru.js":633,"./sd":634,"./sd.js":634,"./se":635,"./se.js":635,"./si":636,"./si.js":636,"./sk":637,"./sk.js":637,"./sl":638,"./sl.js":638,"./sq":639,"./sq.js":639,"./sr":640,"./sr-cyrl":641,"./sr-cyrl.js":641,"./sr.js":640,"./ss":642,"./ss.js":642,"./sv":643,"./sv.js":643,"./sw":644,"./sw.js":644,"./ta":645,"./ta.js":645,"./te":646,"./te.js":646,"./tet":647,"./tet.js":647,"./tg":648,"./tg.js":648,"./th":649,"./th.js":649,"./tl-ph":650,"./tl-ph.js":650,"./tlh":651,"./tlh.js":651,"./tr":652,"./tr.js":652,"./tzl":653,"./tzl.js":653,"./tzm":654,"./tzm-latn":655,"./tzm-latn.js":655,"./tzm.js":654,"./ug-cn":656,"./ug-cn.js":656,"./uk":657,"./uk.js":657,"./ur":658,"./ur.js":658,"./uz":659,"./uz-latn":660,"./uz-latn.js":660,"./uz.js":659,"./vi":661,"./vi.js":661,"./x-pseudo":662,"./x-pseudo.js":662,"./yo":663,"./yo.js":663,"./zh-cn":664,"./zh-cn.js":664,"./zh-hk":665,"./zh-hk.js":665,"./zh-tw":666,"./zh-tw.js":666};function r(e){var t=l(e);return n(t)}function l(e){var t=a[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}r.keys=function(){return Object.keys(a)},r.resolve=l,e.exports=r,r.id=864},879:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=y(n(170)),l=y(n(931)),o=y(n(425)),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(171),n(937),n(426);var u=n(1),c=y(u),f=n(56),d=n(43),p=n(489),m=n(164),j=y(n(912)),b=y(n(913));function y(e){return e&&e.__esModule?e:{default:e}}n(917);var h=(0,f.connect)(function(e){return{teams:e.teams}},function(e){return(0,d.bindActionCreators)({getTeams:m.getTeams,putTeams:m.putTeams,deleteTeams:m.deleteTeams},e)})(a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.isEditing=function(e){var t=n.state.editingKey;return e.key===t},n.cancel=function(){n.setState({editingKey:""})},n.state={editingKey:"",isLoading:!1,data:[]},n.columns=[{title:"名称",dataIndex:"name",key:"name",editable:!0},{title:"成立年份",dataIndex:"create_time",key:"create_time",editable:!0},{title:"全称",dataIndex:"full_name",key:"full_name",editable:!0},{title:"外文名",dataIndex:"en_name",key:"en_name",editable:!0},{title:"联赛",dataIndex:"league",key:"league",editable:!0},{title:"操作",key:"operation",render:function(e,t){var a=n.isEditing(t);return c.default.createElement("div",null,a?c.default.createElement("span",null,c.default.createElement(p.EditableContext.Consumer,null,function(e){return c.default.createElement("a",{href:"javascript:void(0)",onClick:function(){return n.save(e,t.key)},style:{marginRight:8}},"保存")}),c.default.createElement(o.default,{title:"确定取消？",onConfirm:function(){return n.cancel(t.key)},okText:"Yes",cancelText:"No"},c.default.createElement("a",null,"取消"))):c.default.createElement(c.default.Fragment,null,c.default.createElement("a",{className:"team-operate__btn",onClick:function(){return n.edit(t.key)}},"编辑"),c.default.createElement(o.default,{title:"确定删除？",onConfirm:function(){return n.deleteTeam(t.id)},okText:"Yes",cancelText:"No"},c.default.createElement("a",null,"删除"))))}}],n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.Component),i(t,[{key:"edit",value:function(e){this.setState({editingKey:e})}},{key:"deleteTeam",value:function(e){var t=this,n=this.props,a=n.deleteTeams,r=n.getTeams;this.setState({isLoading:!0}),a(e).then(function(){t.setState({isLoading:!1}),r()})}},{key:"save",value:function(e,t){var n=this;e.validateFields(function(e,a){if(!e){var r=n.props,l=r.getTeams,o=r.putTeams,i=n.state.data,u=i.findIndex(function(e){return t===e.key});if(u>-1){var c=s({},i[u],a),f=c.id,d=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(c,["id"]),p=i.splice(u,1,c);n.setState({data:p,isLoading:!0}),o(f,d).then(function(){l()}).finally(function(){n.setState({editingKey:"",isLoading:!1})})}else n.setState({editingKey:""})}})}},{key:"render",value:function(){var e=this,t=this.state,n=t.data,a=t.isLoading,o={body:{row:j.default,cell:b.default}},i=this.columns.map(function(t){return t.editable?s({},t,{onCell:function(n){return{record:n,inputType:"text",dataIndex:t.dataIndex,title:t.title,editing:e.isEditing(n)}}}):t});return c.default.createElement(c.default.Fragment,null,c.default.createElement(l.default,{components:o,bordered:!0,dataSource:n,columns:i,rowClassName:"editable-row",pagination:{pageSize:10}}),a&&c.default.createElement("div",{className:"team-table__spin"},c.default.createElement(r.default,{size:"large",className:"spin"})))}}],[{key:"getDerivedStateFromProps",value:function(e){return{data:e.teams.list.items}}}]),t}())||a;t.default=h},912:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(166));n(168);var r=o(n(1)),l=n(489);function o(e){return e&&e.__esModule?e:{default:e}}var s=a.default.create()(function(e){var t=e.form,n=(e.index,function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["form","index"]));return r.default.createElement(l.EditableContext.Provider,{value:t},r.default.createElement("tr",n))});t.default=s},913:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=c(n(181)),r=c(n(935)),l=c(n(166)),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(163),n(915),n(168);var s=n(1),i=c(s),u=n(489);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=l.default.Item,p=function(e){function t(){var e,n,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];return n=l=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),l.getInput=function(){return"number"===l.props.inputType?i.default.createElement(r.default,null):i.default.createElement(a.default,null)},f(l,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.Component),o(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.editing,a=t.dataIndex,r=t.title,l=(t.inputType,t.record),o=(t.index,function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(t,["editing","dataIndex","title","inputType","record","index"]));return i.default.createElement(u.EditableContext.Consumer,null,function(t){var s=t.getFieldDecorator;return i.default.createElement("td",o,n?i.default.createElement(d,{style:{margin:0}},s(a,{rules:[{required:!0,message:"Please Input "+r+"!"}],initialValue:l[a]})(e.getInput())):o.children)})}}]),t}();t.default=p},917:function(e,t,n){},918:function(e,t,n){}}]);
//# sourceMappingURL=TeamPage.0602ffae08272b8881a3.js.map