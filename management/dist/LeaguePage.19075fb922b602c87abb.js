(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{429:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=g(a(427)),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(424);var o=a(1),i=g(o),c=a(43),s=a(56),f=g(a(804)),m=g(a(808)),d=g(a(810)),p=a(179);function g(e){return e&&e.__esModule?e:{default:e}}a(812);var h=(0,s.connect)(function(e){return{total:e.leagues.list.total}},function(e){return(0,c.bindActionCreators)({searchLeagues:p.searchLeagues,addLeague:p.addLeague,getLeagues:p.getLeagues,putLeague:p.putLeague,deleteLeague:p.deleteLeague},e)})(n=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={searchTxt:"",type:"",visible:!1,editData:null},a.getLeagues=function(e,t){(0,a.props.getLeagues)(e,t)},a.searchLeagues=function(){var e=a.props.searchLeagues,t=a.state.searchTxt;e(a.page,a.pageSize,t)},a.addLeague=function(){a.setState({type:"add",visible:!0})},a.editLeague=function(e,t){a.setState({type:"edit",visible:!0,editData:t})},a.deleteLeague=function(e){(0,a.props.deleteLeague)(e).then(function(){a.setState({visible:!1,editData:null}),a.getLeagues(a.page,a.pageSize)})},a.handleModalOk=function(e){var t=a.props.addLeague;if("add"===a.state.type)return t(l({},e)).then(function(){a.setState({visible:!1,editData:null}),a.getLeagues(a.page,a.pageSize)});var n=e.id,r=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(e,["id"]);return(0,p.putLeague)(n,r).payload.then(function(){a.setState({visible:!1,editData:null}),a.getLeagues(a.page,a.pageSize)})},a.handleModalCancel=function(){a.setState({visible:!1,editData:null})},a.handleChagne=function(e){a.setState({searchTxt:e.target.value})},a.handlePageTurn=function(e,t){a.page=e,a.getLeagues(e,t)},a.pageSize=10,a.page=1,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),u(t,[{key:"componentDidMount",value:function(){this.getLeagues(this.page,this.pageSize)}},{key:"render",value:function(){var e=this.props.total,t=this.state,a=t.searchTxt,n=t.visible,l=t.type,u=t.editData;return i.default.createElement("div",{className:"leaguePage"},i.default.createElement("div",{className:"league-page__header"},i.default.createElement("div",{className:"league-page__search"},i.default.createElement("input",{value:a,onChange:this.handleChagne,className:"ui-input",type:"text"}),i.default.createElement("a",{className:"ui-btn",onClick:this.searchLeagues},"搜索")),i.default.createElement("div",{className:"league-page__add"},i.default.createElement("a",{className:"ui-btn",onClick:this.addLeague},"添加"))),i.default.createElement(f.default,{edit:this.editLeague,del:this.deleteLeague}),i.default.createElement("div",{className:"form-pagination"},i.default.createElement(d.default,{total:e,pageSize:this.pageSize,onChange:this.handlePageTurn})),i.default.createElement(r.default,{title:"add"===l?"增加联赛":"编辑联赛",visible:n,onCancel:this.handleModalCancel,width:680,footer:null},i.default.createElement(m.default,{editData:u,onCancel:this.handleModalCancel,onOk:this.handleModalOk})))}}]),t}())||n;t.default=h},804:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=s(a(425)),l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(426);var u=a(1),o=s(u),i=a(56),c=s(a(805));function s(e){return e&&e.__esModule?e:{default:e}}a(807);var f=(0,i.connect)(function(e){return{leagues:e.leagues}})(n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.Component),l(t,[{key:"render",value:function(){var e=this.props,t=e.leagues,a=e.edit,n=e.del;return o.default.createElement("div",{className:"league-form"},o.default.createElement(c.default,{dataSource:t.list.items,columns:function(e,t){return[{title:"名称",dataIndex:"name",key:"name"},{title:"成立年份",dataIndex:"create_time",key:"create_time"},{title:"全称",dataIndex:"full_name",key:"full_name"},{title:"外文名",dataIndex:"en_name",key:"en_name"},{title:"国家",dataIndex:"country",key:"country"},{title:"球队数目",dataIndex:"team_num",key:"team_num"},{title:"操作",key:"action",render:function(a,n){return o.default.createElement("span",null,o.default.createElement("a",{className:"league-action",onClick:function(){return e(a,n)}},"编辑"),o.default.createElement(r.default,{title:"确定删除？",onConfirm:function(){return t(n.id)},okText:"Yes",cancelText:"No"},o.default.createElement("a",null,"删除")))}}]}(a,n),pagination:{pageSize:20,position:"top"}}))}}]),t}())||n;t.default=f},805:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getType=void 0;var n,r,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(1),o=c(u),i=c(a(0));function c(e){return e&&e.__esModule?e:{default:e}}a(806);var s=t.getType=function(e){return Object.prototype.toString.call(e).slice(8,-1)},f=(r=n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.Component),l(t,[{key:"render",value:function(){var e=this.props,t=e.dataSource,a=e.columns;return o.default.createElement("div",{className:"ui-table"},o.default.createElement("table",null,o.default.createElement("thead",null,o.default.createElement("tr",{className:"ui-table-row"},a.map(function(e){return o.default.createElement("th",{className:"ui-table-th",key:e.key},e.title)}))),o.default.createElement("tbody",null,t.map(function(e){return o.default.createElement("tr",{className:"ui-table-row",key:e.key},a.map(function(t){var a=e[t.dataIndex];return"Function"===s(t.render)&&(a=t.render(a,e)),o.default.createElement("td",{key:t.key,className:"ui-table-td"},a)}))}))))}}]),t}(),n.propTypes={dataSource:i.default.array.isRequired,columns:i.default.array.isRequired},r);t.default=f},806:function(e,t,a){},807:function(e,t,a){},808:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(1),u=function(e){return e&&e.__esModule?e:{default:e}}(l);function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}a(809);var i={id:void 0,name:"",fullName:"",enName:"",country:"",createTime:"",teamNum:""},c=function(e){function t(){var e,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return a=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.state=n({},i,{lackName:!1,lackCreateTime:!1,lackCountry:!1,lackTeamNum:!1}),r.handleSubmit=function(){var e=r.props,t=e.onOk,a=e.editData,n=r.state,l=n.id,u=n.name,o=n.fullName,i=n.enName,c=n.country,s=n.createTime,f=n.teamNum;if(r.formValidate()){var m={name:u,full_name:o,en_name:i,country:c,create_time:s,team_num:f};a&&(m.id=l),t(m).then(function(){r.resetForm()})}},r.formValidate=function(){var e=r.state,t=!e.name,a=!e.country,n=!e.createTime,l=!e.teamNum;return r.setState({lackName:t,lackCountry:a,lackCreateTime:n,lackTeamNum:l}),!(t||a||n||l)},r.resetForm=function(){r.setState(i)},r.handleChange=function(e,t){r.setState(function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}({},e,t.target.value))},r.handleCancel=function(){var e=r.props.onCancel;r.resetForm(),e()},r.handleFileChange=function(e){r.setState({logoText:e.target.files[0].name})},o(r,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),r(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=t.fullName,r=t.enName,l=t.country,o=t.createTime,i=t.teamNum,c=t.logoText,s=t.lackName,f=t.lackCountry,m=t.lackCreateTime,d=t.lackTeamNum;return u.default.createElement("div",{className:"league-edit__form"},u.default.createElement("div",{className:"form__group"},u.default.createElement("label",{htmlFor:"leagueName",className:"label require"},u.default.createElement("span",{className:"label-name"},"名称："),u.default.createElement("input",{value:a,id:"leagueName",onChange:function(t){return e.handleChange("name",t)},className:"input "+(s&&"lack"),type:"text"}))),u.default.createElement("div",{className:"form__group"},u.default.createElement("label",{htmlFor:"leagueCreateTime",className:"label require"},u.default.createElement("span",{className:"label-name"},"成立年份："),u.default.createElement("input",{value:o,id:"leagueCreateTime",onChange:function(t){return e.handleChange("createTime",t)},className:"input "+(m&&"lack"),type:"text"}))),u.default.createElement("div",{className:"form__group"},u.default.createElement("label",{htmlFor:"leagueFullName",className:"label"},u.default.createElement("span",{className:"label-name"},"全称："),u.default.createElement("input",{value:n,id:"leagueFullName",onChange:function(t){return e.handleChange("fullName",t)},className:"input",type:"text"}))),u.default.createElement("div",{className:"form__group"},u.default.createElement("label",{htmlFor:"leagueEnName",className:"label"},u.default.createElement("span",{className:"label-name"},"外文名："),u.default.createElement("input",{value:r,id:"leagueEnName",onChange:function(t){return e.handleChange("enName",t)},className:"input",type:"text"}))),u.default.createElement("div",{className:"form__group"},u.default.createElement("label",{htmlFor:"leagueCountry",className:"label require"},u.default.createElement("span",{className:"label-name"},"国家："),u.default.createElement("input",{value:l,id:"leagueCountry",onChange:function(t){return e.handleChange("country",t)},className:"input "+(f&&"lack"),type:"text"}))),u.default.createElement("div",{className:"form__group"},u.default.createElement("label",{htmlFor:"leagueTeamNum",className:"label require"},u.default.createElement("span",{className:"label-name"},"球队数："),u.default.createElement("input",{value:i,id:"leagueTeamNum",onChange:function(t){return e.handleChange("teamNum",t)},className:"input "+(d&&"lack"),type:"text"}))),u.default.createElement("div",{className:"form__group"},u.default.createElement("label",{htmlFor:"leagueLogo",className:"label"},u.default.createElement("span",{className:"label-name"},"球队Logo："),u.default.createElement("span",{className:"input"},c),u.default.createElement("input",{id:"leagueLogo",accept:"image/*",onChange:this.handleFileChange,className:"file_input",type:"file"}))),u.default.createElement("div",{className:"form__group clearfix"},u.default.createElement("a",{className:"ui-btn float-right",onClick:this.handleSubmit},"确认"),u.default.createElement("a",{className:"ui-btn float-right",onClick:this.handleCancel},"取消")))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.editData&&!t.name){var a=e.editData;return{id:a.id,name:a.name,fullName:a.full_name,enName:a.en_name,country:a.country,createTime:a.create_time,teamNum:a.team_num}}return null}}]),t}();t.default=c},809:function(e,t,a){},810:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(1),o=c(u),i=c(a(0));function c(e){return e&&e.__esModule?e:{default:e}}a(811);var s=(r=n=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleClick=function(e){var t=a.props,n=t.onChange,r=t.total,l=t.pageSize,u=a.state.current;"prev"===e&&1!==u&&(e=u-1),"next"===e&&u!==Math.ceil(r/l)&&(e=u+1),e!==u&&"number"==typeof e&&(n(e,l),a.setState({current:e}))},a.createPageBtn=function(){for(var e=a.props,t=e.total,n=e.pageSize,r=a.state.current,l=Math.ceil(t/n),u=[],i=function(e){var t=e===r?"active":"";u.push(o.default.createElement("li",{className:"ui-pagination-item "+t,onClick:function(){return a.handleClick(e)},key:e},o.default.createElement("a",{className:"ant-pagination-item-link"},e)))},c=1;c<=l;c++)i(c);return u},a.state={current:1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.PureComponent),l(t,[{key:"render",value:function(){var e=this;return o.default.createElement("div",{className:"ui-pagination"},o.default.createElement("ul",{className:"ui-pagination-list"},o.default.createElement("li",{className:"ui-pagination-item prev",onClick:function(){return e.handleClick("prev")}},o.default.createElement("a",{className:"ant-pagination-item-link"})),this.createPageBtn(),o.default.createElement("li",{className:"ui-pagination-item next",onClick:function(){return e.handleClick("next")}},o.default.createElement("a",{className:"ant-pagination-item-link"}))))}}]),t}(),n.propTypes={total:i.default.number.isRequired,pageSize:i.default.number,onChange:i.default.func},n.defaultProps={pageSize:8,onChange:function(){}},r);t.default=s},811:function(e,t,a){},812:function(e,t,a){}}]);
//# sourceMappingURL=LeaguePage.19075fb922b602c87abb.js.map