(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{418:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=p(n(670)),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(529);var o=n(1),s=p(o),i=n(53),u=n(42),c=p(n(813)),f=p(n(879)),d=n(157);function p(e){return e&&e.__esModule?e:{default:e}}n(918);var m=(0,i.connect)(null,function(e){return(0,u.bindActionCreators)({getTeams:d.getTeams,addTeams:d.addTeams},e)})(a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.addTeams=function(){n.setState({visible:!0})},n.handleModalCancel=function(){n.setState({visible:!1})},n.handleAddSubmit=function(e){var t=n.props,a=t.getTeams;(0,t.addTeams)(e).then(function(){n.handleModalCancel(),a()})},n.state={visible:!1},n.page=1,n.pageSize=99,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),l(t,[{key:"componentDidMount",value:function(){this.getTeams()}},{key:"getTeams",value:function(){var e=this.props.getTeams;e(this.page,this.pageSize)}},{key:"render",value:function(){var e=this.state.visible;return s.default.createElement("div",null,s.default.createElement("div",{className:"teams-page__header"},s.default.createElement("div",{className:"teams-page__add"},s.default.createElement("a",{className:"ui-btn",onClick:this.addTeams},"添加"))),s.default.createElement(f.default,null),s.default.createElement(r.default,{title:"添加球队",visible:e,onCancel:this.handleModalCancel,width:680,footer:null},e&&s.default.createElement(c.default,{submit:this.handleAddSubmit})))}}]),t}())||a;t.default=m},482:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditableContext=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(1));t.EditableContext=a.default.createContext()},813:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=h(n(57)),l=h(n(933)),o=h(n(932)),s=h(n(174)),i=h(n(16)),u=h(n(483)),c=h(n(159)),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(113),n(939),n(938),n(155),n(86),n(665),n(161);var p=n(1),m=h(p),j=n(53),b=n(42),y=n(172);function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var g=c.default.Item,_=u.default.Option;var E=(0,j.connect)(function(e){return{leagues:e.leagues}},function(e){return(0,b.bindActionCreators)({getLeagues:y.getLeagues},e)})(a=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,l=Array(r),o=0;o<r;o++)l[o]=arguments[o];return n=a=v(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.state={loading:!1},a.componentDidMount=function(){(0,a.props.getLeagues)()},a.handleSubmit=function(e){var t=a.props,n=t.form,r=t.submit;e.preventDefault(),n.validateFields(function(e,t){if(!e){var n=f({},t,{create_time:t.create_time.format("YYYY")});r(n)}})},a.handleChange=function(e){"uploading"!==e.file.status?"done"===e.file.status&&function(e,t){var n=new FileReader;n.addEventListener("load",function(){return t(n.result)}),n.readAsDataURL(e)}(e.file.originFileObj,function(e){return a.setState({imageUrl:e,loading:!1})}):a.setState({loading:!0})},v(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,p.Component),d(t,[{key:"render",value:function(){var e=this.props,t=e.form.getFieldDecorator,n=e.leagues,a=this.state,d=a.imageUrl,p=a.loading,j=m.default.createElement("div",null,m.default.createElement(i.default,{type:p?"loading":"plus"}),m.default.createElement("div",{className:"ant-upload-text"},"Upload")),b={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:12}}},y={rules:[{type:"string",required:!0,message:"请填写球队名称"}]},h={rules:[{type:"object",required:!0,message:"请选择成立年份"}]},v={rules:[{type:"string",required:!0,message:"请选择联赛"}]};return m.default.createElement(c.default,{onSubmit:this.handleSubmit},m.default.createElement(g,f({},b,{label:"名称"}),t("name",y)(m.default.createElement(s.default,{placeholder:"请填写名称"}))),m.default.createElement(g,f({},b,{label:"全称"}),t("full_name")(m.default.createElement(s.default,{placeholder:"请填写全称"}))),m.default.createElement(g,f({},b,{label:"外文名"}),t("en_name")(m.default.createElement(s.default,{placeholder:"请填写外文名"}))),m.default.createElement(g,f({},b,{label:"成立年份"}),t("create_time",h)(m.default.createElement(o.default,{placeholder:"请选择日期",mode:"date"}))),m.default.createElement(g,f({},b,{label:"联赛"}),t("league",v)(m.default.createElement(u.default,{placeholder:"请选择联赛"},n.list.items.map(function(e){return m.default.createElement(_,{value:e.name,key:e.id},e.name)})))),m.default.createElement(g,f({},b,{label:"队标"}),t("team_logo")(m.default.createElement(l.default,{name:"avatar",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:"//jsonplaceholder.typicode.com/posts/",onChange:this.handleChange},d?m.default.createElement("img",{src:d,alt:"avatar"}):j))),m.default.createElement(g,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},m.default.createElement(r.default,{type:"primary",htmlType:"submit"},"保存")))}}]),t}())||a;t.default=c.default.create()(E)},864:function(e,t,n){var a={"./af":542,"./af.js":542,"./ar":543,"./ar-dz":544,"./ar-dz.js":544,"./ar-kw":545,"./ar-kw.js":545,"./ar-ly":546,"./ar-ly.js":546,"./ar-ma":547,"./ar-ma.js":547,"./ar-sa":548,"./ar-sa.js":548,"./ar-tn":549,"./ar-tn.js":549,"./ar.js":543,"./az":550,"./az.js":550,"./be":551,"./be.js":551,"./bg":552,"./bg.js":552,"./bm":553,"./bm.js":553,"./bn":554,"./bn.js":554,"./bo":555,"./bo.js":555,"./br":556,"./br.js":556,"./bs":557,"./bs.js":557,"./ca":558,"./ca.js":558,"./cs":559,"./cs.js":559,"./cv":560,"./cv.js":560,"./cy":561,"./cy.js":561,"./da":562,"./da.js":562,"./de":563,"./de-at":564,"./de-at.js":564,"./de-ch":565,"./de-ch.js":565,"./de.js":563,"./dv":566,"./dv.js":566,"./el":567,"./el.js":567,"./en-au":568,"./en-au.js":568,"./en-ca":569,"./en-ca.js":569,"./en-gb":570,"./en-gb.js":570,"./en-ie":571,"./en-ie.js":571,"./en-il":572,"./en-il.js":572,"./en-nz":573,"./en-nz.js":573,"./eo":574,"./eo.js":574,"./es":575,"./es-do":576,"./es-do.js":576,"./es-us":577,"./es-us.js":577,"./es.js":575,"./et":578,"./et.js":578,"./eu":579,"./eu.js":579,"./fa":580,"./fa.js":580,"./fi":581,"./fi.js":581,"./fo":582,"./fo.js":582,"./fr":583,"./fr-ca":584,"./fr-ca.js":584,"./fr-ch":585,"./fr-ch.js":585,"./fr.js":583,"./fy":586,"./fy.js":586,"./gd":587,"./gd.js":587,"./gl":588,"./gl.js":588,"./gom-latn":589,"./gom-latn.js":589,"./gu":590,"./gu.js":590,"./he":591,"./he.js":591,"./hi":592,"./hi.js":592,"./hr":593,"./hr.js":593,"./hu":594,"./hu.js":594,"./hy-am":595,"./hy-am.js":595,"./id":596,"./id.js":596,"./is":597,"./is.js":597,"./it":598,"./it.js":598,"./ja":599,"./ja.js":599,"./jv":600,"./jv.js":600,"./ka":601,"./ka.js":601,"./kk":602,"./kk.js":602,"./km":603,"./km.js":603,"./kn":604,"./kn.js":604,"./ko":605,"./ko.js":605,"./ky":606,"./ky.js":606,"./lb":607,"./lb.js":607,"./lo":608,"./lo.js":608,"./lt":609,"./lt.js":609,"./lv":610,"./lv.js":610,"./me":611,"./me.js":611,"./mi":612,"./mi.js":612,"./mk":613,"./mk.js":613,"./ml":614,"./ml.js":614,"./mn":615,"./mn.js":615,"./mr":616,"./mr.js":616,"./ms":617,"./ms-my":618,"./ms-my.js":618,"./ms.js":617,"./mt":619,"./mt.js":619,"./my":620,"./my.js":620,"./nb":621,"./nb.js":621,"./ne":622,"./ne.js":622,"./nl":623,"./nl-be":624,"./nl-be.js":624,"./nl.js":623,"./nn":625,"./nn.js":625,"./pa-in":626,"./pa-in.js":626,"./pl":627,"./pl.js":627,"./pt":628,"./pt-br":629,"./pt-br.js":629,"./pt.js":628,"./ro":630,"./ro.js":630,"./ru":631,"./ru.js":631,"./sd":632,"./sd.js":632,"./se":633,"./se.js":633,"./si":634,"./si.js":634,"./sk":635,"./sk.js":635,"./sl":636,"./sl.js":636,"./sq":637,"./sq.js":637,"./sr":638,"./sr-cyrl":639,"./sr-cyrl.js":639,"./sr.js":638,"./ss":640,"./ss.js":640,"./sv":641,"./sv.js":641,"./sw":642,"./sw.js":642,"./ta":643,"./ta.js":643,"./te":644,"./te.js":644,"./tet":645,"./tet.js":645,"./tg":646,"./tg.js":646,"./th":647,"./th.js":647,"./tl-ph":648,"./tl-ph.js":648,"./tlh":649,"./tlh.js":649,"./tr":650,"./tr.js":650,"./tzl":651,"./tzl.js":651,"./tzm":652,"./tzm-latn":653,"./tzm-latn.js":653,"./tzm.js":652,"./ug-cn":654,"./ug-cn.js":654,"./uk":655,"./uk.js":655,"./ur":656,"./ur.js":656,"./uz":657,"./uz-latn":658,"./uz-latn.js":658,"./uz.js":657,"./vi":659,"./vi.js":659,"./x-pseudo":660,"./x-pseudo.js":660,"./yo":661,"./yo.js":661,"./zh-cn":662,"./zh-cn.js":662,"./zh-hk":663,"./zh-hk.js":663,"./zh-tw":664,"./zh-tw.js":664};function r(e){var t=l(e);return n(t)}function l(e){var t=a[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}r.keys=function(){return Object.keys(a)},r.resolve=l,e.exports=r,r.id=864},879:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=y(n(163)),l=y(n(931)),o=y(n(530)),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(164),n(937),n(531);var u=n(1),c=y(u),f=n(53),d=n(42),p=n(482),m=n(157),j=y(n(912)),b=y(n(913));function y(e){return e&&e.__esModule?e:{default:e}}n(917);var h=(0,f.connect)(function(e){return{teams:e.teams}},function(e){return(0,d.bindActionCreators)({getTeams:m.getTeams,putTeams:m.putTeams,deleteTeams:m.deleteTeams},e)})(a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.isEditing=function(e){var t=n.state.editingKey;return e.key===t},n.cancel=function(){n.setState({editingKey:""})},n.state={editingKey:"",isLoading:!1,data:[]},n.columns=[{title:"名称",dataIndex:"name",key:"name",editable:!0},{title:"成立年份",dataIndex:"create_time",key:"create_time",editable:!0},{title:"全称",dataIndex:"full_name",key:"full_name",editable:!0},{title:"外文名",dataIndex:"en_name",key:"en_name",editable:!0},{title:"联赛",dataIndex:"league",key:"league",editable:!0},{title:"操作",key:"operation",render:function(e,t){var a=n.isEditing(t);return c.default.createElement("div",null,a?c.default.createElement("span",null,c.default.createElement(p.EditableContext.Consumer,null,function(e){return c.default.createElement("a",{href:"javascript:void(0)",onClick:function(){return n.save(e,t.key)},style:{marginRight:8}},"保存")}),c.default.createElement(o.default,{title:"确定取消？",onConfirm:function(){return n.cancel(t.key)},okText:"Yes",cancelText:"No"},c.default.createElement("a",null,"取消"))):c.default.createElement(c.default.Fragment,null,c.default.createElement("a",{className:"team-operate__btn",onClick:function(){return n.edit(t.key)}},"编辑"),c.default.createElement(o.default,{title:"确定删除？",onConfirm:function(){return n.deleteTeam(t.id)},okText:"Yes",cancelText:"No"},c.default.createElement("a",null,"删除"))))}}],n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.Component),i(t,[{key:"edit",value:function(e){this.setState({editingKey:e})}},{key:"deleteTeam",value:function(e){var t=this,n=this.props,a=n.deleteTeams,r=n.getTeams;this.setState({isLoading:!0}),a(e).then(function(){t.setState({isLoading:!1}),r()})}},{key:"save",value:function(e,t){var n=this;e.validateFields(function(e,a){if(!e){var r=n.props,l=r.getTeams,o=r.putTeams,i=n.state.data,u=i.findIndex(function(e){return t===e.key});if(u>-1){var c=s({},i[u],a),f=c.id,d=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(c,["id"]),p=i.splice(u,1,c);n.setState({data:p,isLoading:!0}),o(f,d).then(function(){l()}).finally(function(){n.setState({editingKey:"",isLoading:!1})})}else n.setState({editingKey:""})}})}},{key:"render",value:function(){var e=this,t=this.state,n=t.data,a=t.isLoading,o={body:{row:j.default,cell:b.default}},i=this.columns.map(function(t){return t.editable?s({},t,{onCell:function(n){return{record:n,inputType:"text",dataIndex:t.dataIndex,title:t.title,editing:e.isEditing(n)}}}):t});return c.default.createElement(c.default.Fragment,null,c.default.createElement(l.default,{components:o,bordered:!0,dataSource:n,columns:i,rowClassName:"editable-row",pagination:{pageSize:10}}),a&&c.default.createElement("div",{className:"team-table__spin"},c.default.createElement(r.default,{size:"large",className:"spin"})))}}],[{key:"getDerivedStateFromProps",value:function(e){return{data:e.teams.list.items}}}]),t}())||a;t.default=h},912:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(159));n(161);var r=o(n(1)),l=n(482);function o(e){return e&&e.__esModule?e:{default:e}}var s=a.default.create()(function(e){var t=e.form,n=(e.index,function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["form","index"]));return r.default.createElement(l.EditableContext.Provider,{value:t},r.default.createElement("tr",n))});t.default=s},913:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=c(n(174)),r=c(n(935)),l=c(n(159)),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(155),n(915),n(161);var s=n(1),i=c(s),u=n(482);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=l.default.Item,p=function(e){function t(){var e,n,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];return n=l=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),l.getInput=function(){return"number"===l.props.inputType?i.default.createElement(r.default,null):i.default.createElement(a.default,null)},f(l,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.Component),o(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.editing,a=t.dataIndex,r=t.title,l=(t.inputType,t.record),o=(t.index,function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(t,["editing","dataIndex","title","inputType","record","index"]));return i.default.createElement(u.EditableContext.Consumer,null,function(t){var s=t.getFieldDecorator;return i.default.createElement("td",o,n?i.default.createElement(d,{style:{margin:0}},s(a,{rules:[{required:!0,message:"Please Input "+r+"!"}],initialValue:l[a]})(e.getInput())):o.children)})}}]),t}();t.default=p},917:function(e,t,n){},918:function(e,t,n){}}]);
//# sourceMappingURL=TeamPage.af6d15f77950ecc6cd3b.js.map